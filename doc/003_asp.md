# ASP

Lets actually make a web something.

```bash
dotnet new
```

This gives up many options.
Lets go for the empty asp project.

```
dotnet new web
dotnet run
```

Open your browser to `localhost:5000` or whatever it says in the console and see the hello world message.
You successfully made a server.

## dotnet run

Lets break [dotnet run](https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-run?tabs=netcore21) down.

Firstly it runs a package restore.
That can be done manually using `dotnet restore`, which is the equivalent of `dotnet msbuild -target:restore`.
This creates a long json file that allows the build to find all the dependencies included via `<PackageReference>` nodes in the csproj.
This is the same as `nuget restore`, NuGet is fully built into msbuild so no need for the separate tool.

Secondly it does the build, equivalent to `dotnet msbuild -target:build`.
The process involves calling the compiler (csc) and then copying the `dll`, `pdb`, `deps.json` and `runtimeconfig.json` files to the output.

Finally it runs the compiled Core application, you can do this by calling `dotnet exec` on it or just `dotnet`. 
By default `dotnet run` uses the configuration with the project name in `properties/launchSettings.json`, 
which sets the `ASPNETCORE_ENVIRONMENT` to `Development`.
We'll look at where this configuration is read later.

> `dotnet exec` is an undocumented internal thing so you probably should only use `dotnet` by itself to run programs.


## Cut Down to Minimal

While the empty ASP Core project doesn't do much it isn't a minimal example.

The following files can be deleted, we'll add them back when we find the useful:

```
Properties/launchSettings.json
appsettings.Development.json
appsettings.json
```

Also in the csproj the reference to `Razor.Design` can be removed and `<AspCoreHostingModel>` node can be deleted.
Removing the `AspCoreHostingModel` node causes it to default to `OutOfProcess`.
The `InProcess` options causes it to use IIS instead of Kestrel as a host.
While Kestrel isn't a good options as an internet facing host

We can still `dotnet run` the application and everything runs fine.


## Program.cs

